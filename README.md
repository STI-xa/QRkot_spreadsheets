# QRKot - приложение для Благотворительного фонда поддержки котиков

## **Основная цель и описание проекта**
Оптимизация работы фонда по сбору пожертвований на различные целевые проекты.

Сервис реализован на *FastAPI*, 
в качестве ORM используется *SQLAchemy*.
Для настройки управления пользователями использована библиотека 
*FastAPI Users*.
Выполняется валидация данных и обработка ошибок.

### **Ключевые возможности:** 

***Создание и управление проектами.***  
У каждого проекта есть название, описание и сумма, которую планируется собрать.
Все пожертвования идут в проект, открытый раньше других; 
когда этот проект набирает необходимую сумму и закрывается — 
пожертвования начинают поступать в следующий проект.   

***Создание и просмотр пожертвований.***   
Каждый пользователь может сделать пожертвование. 
Пожертвования вносятся в фонд, а не в конкретный проект. 

***Алгоритм распределения пожертвований.***   
Каждое полученное пожертвование автоматически добавляется в первый открытый проект, 
который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы или 
же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. 
При создании нового проекта все неинвестированные пожертвования автоматически 
вкладываются в новый проект.

***Права пользователей.***  
Целевые проекты создаются администраторами сайта. 
Любой пользователь может видеть список всех проектов.
Зарегистрированные пользователи могут отправлять пожертвования и просматривать 
список своих пожертвований.


## **Как запустить проект**:

### **Для Windows, локально:**

* Клонировать репозиторий и перейти в него в командной строке:
```
git clone git@github.com:STI-xa/cat_charity_fund.git

```

* Cоздать и активировать виртуальное окружение:
```
python -m venv venv

source venv/Scripts/activate
```

* Установить зависимости из файла requirements.txt:
```
python -m pip install --upgrade pip

pip install -r requirements.txt
```

* Создать файл «.env», добавив в него переменные окружения:

*Описание шаблона .env*
Необходимо указать переменные окружения в следующем формате:
```
APP_TITLE=*название приложения*  
APP_DESCRIPTION=*описание проекта*    
DATABASE_URL=*подключение БД, например: sqlite+aiosqlite:///./fastapi.db*   
SECRET=*уникальный секретный ключ*  
FIRST_SUPERUSER_EMAIL=*email для автоматического создания суперпользователя*  
FIRST_SUPERUSER_PASSWORD=*пароль для автоматического создания суперпользователя*  
```

* Инициализировать Alembic в проекте:
```
alembic init --template async alembic
```

* Создать миграции:
```
alembic revision --autogenerate -m "First migration"
```

* Применить миграции:
```
alembic upgrade head 
```

* Выполнить команду запуска проекта с автоматическим обновлением:
```
uvicorn app.main:app --reload
```
### После запуска проекта интерактивная документация с возможностью тестирования в Swagger будет доступна по ссылке:

* http://127.0.0.1:8000/docs#

## **Стэк технологий**:
* ![image](https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue)
* ![image](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)
* ![SQLite](https://img.shields.io/badge/sqlite-%2307405e.svg?style=for-the-badge&logo=sqlite&logoColor=white)
* ![FastAPI](https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi)
* ![JWT](https://img.shields.io/badge/JWT-black?style=for-the-badge&logo=JSON%20web%20tokens)
* ![Swagger](https://img.shields.io/badge/-Swagger-%23Clojure?style=for-the-badge&logo=swagger&logoColor=white)
